---
title: "Módulo 2"
output: html_document
date: "2025-09-14"
---

# Módulo 2

## Introdução e objetivos

### Objetivos

Entender o R e como ele interage com o computador. Saber consultar sua documentação. Há mais de 18 mil pacotes oficiais no CRAN, multiplataforma, inpumeros recursos gráficos. Download e pipipipopopó. IDEs/Editores disponíveis para R: Rstudio, Rcode, Tinn-R; VIM, Visual Studio Code (VS Code), GNU Emacs, Spacemacs ou Doom-Emacs usando ESS.

## Primeiros passos

-   CLi - command line interface
-   REPL - Read, eval, print and loop

O básico é ter uma linha/cadeia de comando, coisa que já sabemos. Basicamente, é a linha de comandos redigidos.

### Modos de uso

-   Modo REPL: script com instruções, que são avaliadas no console, supervisionadas pelo analista, e salvas, duplicadas ou modificadas de acordo com a necessidade.
-   Modo Batch: script pode ser executado sem supervisão; é usado em ambientes de produção ou simulação computacional.

As instruções ou comentários são marcados pelas #. Após elas, tudo no código é entendido como comentário. Linhas sem # são executadas no terminal. Instruções podem ser dadas em uma linha ou em várias. Para mais de uma instrução em uma mesma linha, separar cm ponto e vírgula (;). Ex:

```{r}
# soma simples
x <- 57 + 19
print(x)

# Meu IMC
82/1.70^2

# Instrução em uma única linha
2 + 5 + 8 - 15 + 9

# Instrução em várias linhas
2 + 
  9 -
  7 +
  2

```

#### Recomendações:

1. Evitar passar de 72 ou 80 caracteres;
2. Manter o código devidamente indentado (CTRL + i);
3. Evitar muitas instruções em uma mesma linha.

### Ordem de execução dos comandos

É a mesma ordem de execução matemática usual

```{r}
2 + 2 * 4
2 + (2 * 4)
2^2 * 5^3
(2^2) * (5^3)
```

### Área e espaço de trabalho

**Criação de objetos**

Ao fazer atribuições, são criados objetos na área de trabalho. Usa-se <- para atribuir algo a um objeto (alt + i). Objetos podem ser reusados para criar outros (é a intenção). Ex:

```{r}

# Criação de objetos para fazer operações
peso <- 82
altura <- 1.70
IMC <- peso/altura^2
IMC

# Listar objetos da área de trabalho
ls()

# Apagar objetos
rm(IMC)
ls() # mostra o conteúdo do .GlobalEnv, a área de trabalho
# peso  altura


```

O comando ls() mostra o conteúdo do .GlobalEnv, a área de trabalho, mas também há objetos em outros ambientes e espaços. Esses são os espaços dos pacotes. Quando não encontra um objeto em .GlobalEnv, ele parte para o próximo ambiente de trabalho. search() retorna a lista de espaços de trabalho. Cada pacote tem o seu próprio. Ex:

```{r}
# Espaços de trabalho
women # já existente dentro do R

# Para listar o conteúdo de um determinado espaço
ls("package:datasets") # lista todos os datasets integrados ao R

# Caso crie-se um objeto com um nome de um dataset do R, é possível acessá-lo por meio de 
datasets::women

```

### Diretório de Trabalho

O diretório de trabalho é o local no sistema operacional para onde o R está apontando. Isto é, de onde ele lê e escreve arquivos de modo padrão. Pode-se definir comandos (recomendável) ou usando *RStudio IDE > Session > Setting Work Directory*. Ex: 

```{r}
# Diretório atual de trabalho
getwd()

# Trocar diretório de trabalho
# setwd("~/Downloads") # moveria para os downloads

# Lista o conteúdo do diretório atual
dir()

# Instalação de pacotes
install.packages("tidyverse")

```


## Arquivos, pacotes e documentação

### Arquivos da linguagem R

Há inúmeros arquivos para melhorar a experiência dos usuário:

- .Rhistory: arquivo de texto que salva o histórico de instruções executadas.
- .RData: arquivo binário que salva objetos na área de trabalho. Serve para restaurá-los e é útil quando o processamento é demorado.
- .Rproj: arquivo que define configurações do projeto. O uso também pode ser configurado por meio do caminho *RStudio IDE > Tools > Global Options*
- .Rprofile: Arquivos de configurações lido no início das seções. Carrega pacotes muito usados e configura opções, mensagem de boas vindas e diagnóstico do sistema, pode ser definido por projeto ou por usuário.

### Instalação de pacotes

#### Pacotes 

São coleções de funções e conjuntos de dados organizados e documentados. Um pacote contém código R e eventualmente códigos de outras linguagens. Podem depender de *libs* do sistema operacional.

##### Formas de instalação

Pacotes podem ser instalados de repositórios: CRAN, Biocondutor, MRAN, etc; de arquivos de instalação: *.tar.gz; De repositórios GIT: Github, Gitlab, etc.

```{r}
# Para instalar um pacote do repositório.
install.packages("tidyverse")

# Para carregar o pacote e usá-lo.
library(tidyverse)

# Para ver o conteúdo dele.
ls("package:tidyverse")

# Documentação do pacote.
help(package = "tidyverse")

# Para ver onde foi instalado.
system.file(package = "tidyverse")

# Os caminhos para endereços de instalação.
.libPaths()

# Para remover o pacote da sessão.
detach("package:tidyverse", unload = TRUE)

# Funções relacionadas a pacotes.
apropos("package")

```

### Documentação interna

Consiste de documentação de objetos e funções. Tutoriais chamados de vinhetas (vignettes). Existem funções especícas para a consulta destes. Pode-se procurar na web também.

```{r}
# Duas formas iguais de chamar
# a documentação.
?women
help(women)

# Procura por ocorrêncians de `women`.
help.search("women")

# Objetos que batem com o termo.
apropos("tukey")

# Exibe as vinhetas de um pacote.
browseVignettes(package = "survival") # é outro tipo de documentação, mas não são padronizadas como a documentação oficial

# Procura pelo termo no
# r-project.org.
RSiteSearch("spider plot")

```

#### Campos oficiais da documentação: 

- **Cabeçalho**: Indica o pacote.
- **Título**: Resumo do que são os objetos documentados
- **Descrição**: do que o objeto é/faz
- **Usage**: Como usar ou formas de montar as instruções
- **Arguments**: Quais os argumentos formais da função
- **Value**: O que a função retorna

### Guia de sobrevivência do R

**4 Principais funções para o iniciante**

1. str()
2. ls()
3. apropos()
4. help()

**Outras funções úteis**

1. help.search()
2. help.start()
3. RSiteSearch()
4. browseVignettes()
5. vignette()

1. args()
2. class()
3. methods()
4. find()
5. example()
6. demo()


## Operações aritméticas e lógicas

### Operações básicas

```{r}
2 + 3 # Soma.
2 - 3 # Subtração.
2 * 3 # Multiplicação.
2/3 # Divisão.
2^3 # Potenciação.
2^(1/3) # Radiciação.
10 %% 3 # Resto.
10 %/% 3 # Parte inteira.

```

### Logarítmo

```{r}
exp(2) # Exponencial neperiano.
log(10) # Neperiano.
log10(10) # Base 10.
log2(10) # Base 2.
log(10, base = 5) # Base qualquer.
```

### Trigonométricas

```{r}
sin(3) # Seno.
cos(3) # Cosseno.
tan(3) # Tangente.
asin(0.5) # Arco seno.
acos(0.5) # Arco cosseno.
atan(0.5) # Arco tangente.

```

### Arredondamento

```{r}
round(pi, digits = 5)
floor(pi) # Inteiro logo baixo.
ceiling(pi) # Inteiro logo acima.
trunc(pi) # Trunca em relação ao zero.

```

### Operações lógicas

#### Comparações de valor

```{r}
x <- 3
y <- 4

2 == 2 # Igualdade.
2 != 2 # Desigualdade.
x <= y  # Outros operadores: "<", ">", and ">=".

(2 < 5) & (7 >= 3) # Operador AND.
(2 < 5) | (7 >= 3) # Operador OR.
!(2 < 5) # Operador NOT.
"a" == "b" # Compara strings.
"a" < "b" # Ordem alfanumérica.

```

#### Tipos especiais

**NA**: para valores ausentes.
**NULL**: para objetos vazios.
**Inf** e **-Inf**: para innitos.
**NaN**: para resultados não razoavelmente
denidos.


```{r}
5 + NA          # O resultado é NA.
is.na(5 + NA)   # Verifica se é NA.

10 + NULL       # Retorna objeto vazio.
is.null(NULL)   # Verifica se é nulo.

5/0             # Infinito.
is.finite(5/0)  # Verifica se é finito.

0/0             # Valor indeterminado.
is.nan(0/0)     # Verifica se é not a number.
```


## Estrutura de dados

### Tipos de objetos

Praticamente tudo em R são objetos. Objetos têm duas características: tipo(type) e classe(class). O tipo de um objeto diz o que é possível fazer com ele. A classe diz quais métodos podemos aplicar em um objeto. Precisamos conhecer as principais estruturas e suas características. Principais tipos de objetos em R: 

- Caracteres (character); 
- Números reais (double e numeric); 
- Números inteiros (integer); 
- Lógico (logical); 
- Complexo (complex);
- Raw (cru/bruto).

```{r}
inteiro <- 10L # O L força a interpretar o 10 como inteiro, e não real
real <- 10
is.numeric(inteiro)

is.numeric(real)
is.double(inteiro)
is.double(real)
is.integer(inteiro)
is.integer(real)

```


### Estruturas de dados

Conjuntos de dados são combinações dos de objetos. Como organizar tais dados é o que chamamos de estruturas de dados. O R vem equipado com diversas estruturas para trabalhar com dados. Essas estruturas são chamadas de classes, cujo comando é class().
Estruturas mais importantes em R: 

- atomic vector (vetores atômicos).
- matrix (matrizes).
- list (listas).
- data.frame (tabelas).

Exemplos de criação de objetos: 

```{r}
vetor_atomico <- c(1,2,3,4)

matriz <- matrix(c(1,0,0,1),2, 2) # dá dimensão (linhas e colunas) a um vetor

lista <- list("a" = 5, "b" = 5L,
"c" = "Letra") # diferentes tipos de objetos

tab <- data.frame("Nome" = c("Bent", "Jon"),
                  "Idade" = c(3, 4))

```


## Vetores atômicos

Quando combinamos objetos de um único tipo temos os vetores **atômicos.**. Exemplo: `vetor_numerico <- c(1, 5, 11, 33)`. 
Como nomear objetos em R?

- Um nome pode consistir de letras, números, e _;
- Não pode conter palavras reservadas: TRUE, FALSE, NULL, if entre outras;
- Veja todas as palavras reservadas usando ? Reserved.

1. Vetor de caracteres. Ex: `vetor_caracter <- c("hello", "world")`.
2. Vetor Lógico. Ex: `vetor_logico <- c(TRUE, TRUE, FALSE)`.
3. Vetor combinado. Ex: 

```{r}
vetor_combinado <- c(vetor_numerico,
                     vetor_caracter,
                     vetor_logico,
                     "boo")
```

4. Coerção entre objetos. Ex: `class(vetor_combinado)`.

### Como consultar o tipo de um objeto?

Usa-se `is.*` para consultar o tipo de um objeto. Ex:

```{r}
# Funções que começam com is.
# apropos("^is\\.")
is.integer(1)
is.numeric(1)
is.integer(1L)
is.numeric(1L)
is.character("Curitiba")
y <- factor(c("Solteiro", "Casado"))
is.factor(y)
is.character(y)
is.logical(c(TRUE, FALSE))

```

Outra opção seria usar `typeof()`.

```{r}
x <- "caracter"
typeof(x) ## [1] "character"

x <- 10
typeof(x) ## [1] "double"

x <- 10L
typeof(x) ## [1] "integer"

x <- TRUE
typeof(x) ## [1] "logical"
```

### Conversão e classe de objetos

O R é uma linguagem automaticamente tipicada. Pode ser necessário converter um objeto para diferentes tipos.
Exemplo: 

```{r}
x <- 10
is.numeric(x)

x <- as.logical(x)
is.numeric(x)

```

A classe `(class())` de um objeto orienta que tipo de métodos podemos usar.
Métodos são funções genéricas do R que atuam de forma diferente de acordo com o tipo do objeto.
Exemplo:

```{r}
# Um vetor numérico.
x <- c(1, 2, 3)
class(x)

methods(class = "numeric")

```

É possível, ainda, criar objetos com atributos.
Exemplos:

```{r}
# Numérico mas com valores nomeados.
notas <- c("João" = 7.8,
"Bianca" = 10,
"Eduarda" = 8.5)
class(notas)

attributes(notas)

names(notas) # acessando os atributos do vetor

length(notas) # acessando o tamanho do vetor

```

### Criando sequências estruturadas

Função `seq()` cria sequências estruturadas.
Exemplo: 

```{r}
# Sequencia de 1 a 7
1:7

# Sequencia de 1 a 10 de 2 em 2
seq(from = 1, to = 10, by = 2)

# Sequencia de 1 a 20 de tamanho 7
seq(from = 1, to = 20, length.out = 7)

# Sequencia começando em 1 de tamanho sete de 2 em 2.
seq(from = 1, by = 2, length.out = 7)

```

### Criando repetições estruturadas

Função `rep()` cria repetições estruturadas.
Exemplo:

```{r}
# Repita o 0 5 vezes
rep(0, 5)

# Repita a sequencia 1 a 3, 2 vezes
rep(1:3, times = 2)

# Repita a sequencia 1 a 3, cada número 2 vezes
rep(1:3, each = 2)

```

### Gerando valores aleatórios

Dado um vetor de elementos podemos usar a função sample() para obter uma amostra aleatória.
Exemplo:

```{r}
# Retire uma amostra aleatório de tamanho 10 de uma sequencia de 1 a 20 sem reposição.
sample(1:20, size = 10, replace = FALSE)

# Retire uma amostra de tamanho 10 da sequencia "a", "b", "c" de tamanho 10 com reposição.
sample(c("a", "b", "c"), size = 10, replace = TRUE)

```

Ou ainda, usando distribuições de probabilidade:

```{r}
# 10 amostras da distribuição uniforme entre 0 e 1
runif(n = 5, min = 0, max = 1)

# 10 amostras da distribuição Normal com média 1.80 e desvio-padrão 0.1
rnorm(n = 5, mean = 1.80, sd = 0.1)

```


### Selecionando elementos de um vetor

Podemos selecionar os elementos de um vetor usando: alguma característica, posição ou nome.
Exemplo:

```{r}
## Criando vetor numérico nomeado.
notas <- c("João" = 7.8,
"Bianca" = 10,
"Eduarda" = 8.5,
"Felipe" = 7.0,
"Márcia" = 6.5)

notas[1] # A posição 1.
notas[5] # A posição 5.
notas[1:2] # Um intervalo.
notas[c(1, 3)] # Um conjunto.
notas[-1] # Remove.

```

### Seleção com máscara lógica

```{r}
# Alunos com nota maior que 7.0
mask <- notas > 7.0
mask

notas[mask]

# Alunos com nota maior que 9.0
notas[notas > 9.0]


```

### Modificando vetores

```{r}
# Atribui nota para um aluno.
notas["João"] <- 0
notas

# Atribui nota "desconhecida" para aluno.
notas["Felipe"] <- NA
notas

```

### Removendo e adicionando componentes de um vetor

#### Removendo

```{r}
# Remove elemento do vetor.
notas <- notas[-4]
notas

```


#### Adicionando

```{r}
append(notas, value = c("Carlos" = 9.0))

append(notas, value = c("Simone" = 7.2),
       after = 0)

novas_notas <- c(notas,
                 c("Pedro" = 8.0,
                   "Luana" = 8.3))
novas_notas
```



## Matrizes, listas e tabelas


